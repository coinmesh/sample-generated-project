version: '2'

services:
  lnd:
    build: ./data-sources/lnd
    volumes:
      - ./data-sources/lnd/lnd.conf:/home/lnd/.lnd/lnd.conf
      - ./data-sources/litecoind/litecoin.conf:/home/lnd/.litecoin/litecoin.conf
    command: lnd  --datadir=/home/lnd/.lnd
    ports:
      - "9735:9735"
      - "10009:10009"
  litecoind:
    build: ./data-sources/litecoind
    volumes:
      - ./data-sources/litecoind/litecoin.conf:/home/litecoin/.litecoin/litecoin.conf
    command: litecoind  --datadir=/home/litecoin/.litecoin --printtoconsole -rpcallowip=0.0.0.0/0
    ports:
      - "19332:19332"
      - "29001:29001"
  app:
    image: node:8
    working_dir: /home/node/app
    volumes:
      - ./data-sources/lnd/:/home/node/.lnd/
      - /home/node/app/node_modules
      - ./:/home/node/app
    ports:
      - "9001:9000"
      - "3304:3304"
      - "3005:3005"
      - "3302:3302"
      - "3011:3011"
      - "3010:3010"
    command: "npm start --unsafe-perm"
    environment:
      - RPC_PORT=19332
      - RPC_HOST=litecoind
      - RPC_USERNAME=rpcuser
      - RPC_PASSWORD=rpcpassword
      - GRPC_SSL_CIPHER_SUITES=HIGH+ECDSA
      - LNSERVICE_LND_DIR=/home/node/.lnd
      - LNSERVICE_CHAIN=litecoin
      - LNSERVICE_NETWORK=testnet
